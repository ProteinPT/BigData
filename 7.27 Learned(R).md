# 통계기반 데이터 분석

> 1. 추론통계
>    1. 귀무가설과 대립가설
>    2. 유의수준과 유의확률
>    3. 점추정과 구간추정
>    4. t.test()함수를 활용한 t검정
>    5. 분산 분석

### 기술통계와 추론통계

- `기술통계`: 측정이나 실험을 통해 수집한 데이터의 정리, 그래프나 숫자 등으로 요약, 표현하는 등 데이터의 특성을 규명하는 통계적 방법
  - 서술하는통계라는 뜻으로 데이터의 특성을 이해하기 쉽게 기술하는 통계
  - 평균 중앙값 최빈값 범위 분산 표준편차 사분위수 도수분포표 왜도 첨도 등
  - 그래프: 파이그래프 상자그림, 막대그래프, 히스토그램 등
  - 탐색적 분석과 기술통계: 탐색적 분석과정에서 기술통계방법을 활용
- `추론통계`: 소수의 대상을 가지고 연구하는 것이 경제적이고 효율적일 때 모집단에서 추출한 표본데이터를 가지고 그 모집단의 특성 및 가능성 등을 추론해내느 통계적 방법



#### 귀무가설과 대립가설

`귀무가설`: 차이가 없거나 의미있는 차이가 없는 경우의 가설

`대립가설`: 연구자가 연구를 통해 입증되기를 기대하는 예상이나 주장하는 내용

하나가 채택되면 하나는 기각



#### 유의수준과 유의확률

`유의수준`:가설 검정에서 가설 채택여부를 결정하는 기준값

`유의확률(p-value)`: 집단 간의 차이가 우연히 일어났을 확률

```shell
p-value >=  유의수준: 귀무가설 채택, 대립가설 기각
p-value <=  유의수준: 귀무가설 기각, 대립가설 채택
```



#### 점추정과 구간추정

> 표본으로부터 모집단의 모수(모집단의 평균, 모표준편차, 모분산 등)추정

점추정: 모수가 특정한 값일 것이라고 추정하는 것

구간추정: 모수가 특정한 구간 안에 있을 것이라고 추정하는 것



#### t.test()함수를 활용한 t-검정

일표본, 대응이표본, 독립이표본인지 여부를 확인

- `일표본`: 하나의 모집단에서 추출한 표본의 통계량으로 모집단의 모수를 추정하는 경우

- `대응이표본`: 하나의 모집단에서 표본을 추출하여 데이터를 관측하고 두 모집단의 차이를 검정하는 경우 사용

  ​	(전후를 비교)

- `독립이표본`: 독립된 두 모집단에서 각각 표본을 추출하여 데이터를 관측하고 두 모집단의 차이를 검정하는 경우 사용

두 집단의분산이 같은지, 다른 여부를 확인

##### 양측검정인지 단측검정인지 여부를 확인( 두그룹이 다르다= 양측검정, 한 방향으로 결과값의 방향이 같다= 단측검정)



#### t.test()함수 사용 예

``` R
t.test(x,y,alternative='two.sided',paired=FALSE, var.equal= FALSE, conf.level=0.95)
```



#### 분산분석

- 세 개 이상의 집단 비교
- 일원분산분석: 일원분산분석(One-way ANOVA)은 종속 변수가 1개이며, 범주형 독립 변수도 1개인 경우
  - 한 가지 변수의 변화가 종속변수에 미치는 영향을 보기 위해 사용
  - 학력에 따른 소득 수준의 차이: `학력=독립변수, 소득= 종속변수` 독립변수인 학력을 초졸 중졸 대졸 석사 박사로 집단을 나누면 3개이상의 집단이 된다.
- 이원분산분석: 범주형 독립 변수가 2개 이상일 때 집단 간 차이가 유의한지를 검증하는 데 사용
  - 상호작용효과 > 한 변수의 변화가 결과에 미치는 영향이 다른 변수의 수준에 따라 달라지는 지를 확인하기 위해 사용
  - 생존률= 종속변수 1등칸2등칸3등칸, 승무원어린이남자여자= 독립변수
  - 독립변수가 두 개 이상의 집단



## 상관분석

> 1. 상관분석
> 2. 피어슨 상관계수
> 3. 스피어만 상관계수
> 4. 상관계수 검정

#### -확률론과 통계학에서 두 변수 간 어떤 선형적 또는 비선형적 관계를 갖고 있는 지를 분석하는 방법

상관계수: 두 변수는 서로 독립적인 관계이거나 상관된 관계일 수 있으며 이 때 두 변수 간의 관계의 강도

##### 상관계수는 두 변수 간의 연관된 정보를 나타낼 뿐, 원인과 결과에 대한 인과관계를 설명하는 것은 아님!!



#### 피어슨 상관계수

> 두 변수 간의 선형적인 관계를 측정하여 [-1,1] 사이 값을 갖음

- 1또는 -1에 가까울수록 뚜렷한 선형 상관관계

- 양의 상관관계: 1에 가까울수록 한 변수의 값이 커지면 다른 변수의 값도 커짐

- 음의 상관관계: -1 에 가까울수록 한 변수 값이 커지면 다른 변수의 값은 작아짐

- 선형적인 상관관계가 없는 경우: 0에 가까운 값

  ##### x와 y의 공분산 / x와 y의 표준편차



#### 단순선형회귀

##### (인공신경망, 머신러닝 분야에서 활용)

선형회귀: 종속변수 Y와 한 개 이상의 독립 변수(또는 설명변수) X와의 선형 상관관계를 모델링하는 회귀 분석 기법

- `종속변수`: 영향을 받는 변수, 예측의 대상이 되는 변수로 관심변수, 반응변수
- `단순선형회귀`: 한 개의 설명변수에 기반한 경우
- `다중선형회귀`: 둘 이상의 설명변수에 기반한 경우

##### 선형회귀모델: 추세선을 이용하여 종속변수의 값을 예측하는 모델

단순선형회귀모델: 독립변수가 하나인 경우

- 기울기와 절편을 구해 단순 선형회귀 모델을 만들 수 있음
- 최소제곱법: 잔차의 단순합이 아닌 제곱합을 구하여 그 값이 최소인 회귀모델 생성
- 최소 제곱 추정량: 최소 제곱법으로 구해진 회귀계수 추정량
- 오차 제곱해서 합을 구하고 이것을 다시 평균을 낸다. => 평균 오차제곱의 합



#### 결정계수

> 추정한 선형모델이 주어진 데이터에 적합한 정도를 재는 척도



## 다중 선형 회귀

> 하나의 종속변수와 두개 이상의 독립변수가 있고, 오차항이 있는 선형관계

전진선택법, 후진제거법, 단계적방법

##### - 전진선택법: 절편만 있는 상수모델에서 싲가하여 가장 중요한 설명 변수부터 차례로 추가하는 방법

​	기준 통계치를 개선시키면 추가하고, 그렇지 않으면 추가를 멈춤

##### - 후진제거법: 모든 후보 설명변수가 포함되어 있는 모델에서 시작해 가장 영향이 적은 변수부터 하나씩 제거해 나가는 방법

​	더이상 유의하지 않은 변수가 없을 때까지 제거

##### - 단계적방법: 추가와 제거를 반복하는 방법

설명변수 중요성 판단기준 통계량: F 통계량, 결정계수, AIC



## 시계열 데이터

> 시간에 따라 관측된 데이터

##### 추세요인: 데이터의 값이 시간에 따라 커지거나 작아지거나 수평인 추세

##### 계절요인: 짧은 구간으로 반복되는 트렌드가 있는 경우

##### 순환요인: 명확한 이유없이 알려지지 않은 주기를 가지고 변화하는 데이터

##### 불규칙 요인: 추세/계절/순환 요인에 해당하지 않으면 불규칙 요인 또는 노이즈



#### 정상성

- `정상 시계열 데이터`: 어느 구간에서도 평균이 비슷
- `비정상 시계열 데이터`: 구간별로 평균이 다름

평균이 시간 흐름에 영향 받지 않고, 안정화 되어 있는 지 그래프 비교

분산, 공분산

ARIMA 모델은 시계열 데이터가 정상성 특징을 보일 때 효과적 

- 시계열 데이터가 정상성 인지 테스트하는 과정 필요

- 대부분의 시계열 데이터는 비정상성이며, 이 경우 정상 시계열 데이터로 만든 후 분석을 수행

  - #### 비정상 시계열을 정상 시계열로 변환하는 방법

  - ```shell
    평균이 일정하지 않은 경우 `차분`을 이용
    시간에 따라 분산이 일정하지 않은 경우 자연로그 이용
    계절 요인을 갖는 비정상 시계열을 정상 시계열로 바꿀 때 season 기준으로 차분, 1년 주기 계절성을 갖는 월간 데이터를 차분할 때 12를 기준으로 차분
    ```

  - `차분`: 이전시점의 데이터를 빼는 것

  -  d값이 1이면 바로 이전 데이터를 현재 데이터에서 뺀다

  - d값이 12이면 12개이전의 데이터를 현재 데이터에서 뺀다



#### 시계열 모델

> `자기회귀모델`: 자신의 과거값과의 관계에 기반함.
>
> `AR 모델`: 현재의 데이터가 몇 번째 이전의 데이터까지 영향을 받는 지 알아냄.
>
> `이동평균모델`: 백색잡음의 현재값에서부터 q- 시간 지연된것 까지 q+1개 항의 선형 가중합 모델
>
> `자기회귀 누적이동평균모델`: ar모델과 ma 모델을 통합한 모델
>
> ##### ARIMA(p,d,q)모델: 
>
> - d는 비정상 시계열을 정상화하기 위해 몇 번의 차분을 하는지를 의미
>
> - d=0이면 ARMA(p,q)모델이라고도 부름
>
> - p는 AR모델과 관련이 있고, q는 MA모델과 관련이 있음



#### 주성분 분석

> 차원축소: 데이터의 변수가 너무 많은 경우, 변수의 수를 줄여 분석, 예측에 유리하도록 하는 것

##### 주성분분석: 고차원 데이터를 압축하거나, 정보가 더 잘 드러나는 표현을 찾기 위해 분포의 주성분을 분석해주는 방법

(2차원의 데이터를 1차원 데이터로 차원 축소하는 과정)

- 고차원의 데이터를 최대한 보존하면서, 저차원의 데이터로 변환시킬 수 있음
- 3차원 공간의 정보를 최대한 유지하여 2차원 사진을 찍는 것이 올바른 차원 축소
- 주성분: 희생되는 정보가 가장 적고, 전체 변수의 변동성을 대부분 설명할 수 있는 적은 수의 변수 집합

##### 주성분 분석의 목적

- 데이터에서 노이즈를 제거하거나 주성분에 유지되는 정보를 시각화 하는데 사용
- 회귀 분석 시 독립 변수 간 다중 공선성이 존재해서 p-value가 커지는 등의 문제가 발생하는 경우
  - 다중 공선성: 회귀 분석에서 독립변수 간의 상관관계가 강한 경우 발생
  - 주성분 분석을 통해 변수(차원)축소를 하고 나서 모델을 생성하면 성능 향상 가능
- 정보가 더 잘 드러나는 표현을 찾기 위해 사용
  - 잠재변수: 측정되지는 않지만, 측정된 데이터의 기저에 숨어 측정데이터를 결정짓는 데이터

#### 적절한 주성분 개수 선택법

- 데이터 시각화를 위해 차원을 축소한다면 2~3개의 주성분이 적당
- 분산의합(누적기여율) `Cumulative Proportion`

#### 스크리 그래프

#####  : 주성분의 상대적인 중요도 시각화

고유값이 수평을 유지하기 전 단계로 주성분의 수를 결정 가능
